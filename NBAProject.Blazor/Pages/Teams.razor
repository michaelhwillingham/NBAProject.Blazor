@page "/teams"
@using NBAProject.Models.Documents
@using NBAProject.Models.Queries

<MudText Typo="Typo.h3">Teams</MudText>

@if (TeamsList != null)
{
    foreach (var team in TeamsList)
    {
        <MudCard Class="mt-8 mb-8" Elevation="25">
            <MudCardMedia Image="@team.WikipediaLogoUrl" Height="300" Style="background-size: contain" />
            <MudCardContent>
                <MudText Typo="Typo.h5">@team.City @team.Name</MudText>
                <MudText Typo="Typo.body2">@team.Conference Conference</MudText>
                <MudText Typo="Typo.body2">@team.Division Division</MudText>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Roster</MudButton>
                <MudButton Variant="Variant.Text" Color="Color.Primary">Team Stats</MudButton>
            </MudCardActions>
        </MudCard>
    }
}

@code {
    private List<Team> TeamsList { get; set; }
    
    protected override async Task OnInitializedAsync()
    {
        var response = await Mediator.Send(new GetAllTeams());
        TeamsList = response.OrderBy(x => x.City).ToList();
    }
}